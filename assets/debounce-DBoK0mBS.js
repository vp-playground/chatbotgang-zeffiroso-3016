function T(f,p,{signal:e,edges:i}={}){let o,u=null;const s=i!=null&&i.includes("leading"),r=i==null||i.includes("trailing"),l=()=>{u!==null&&(f.apply(o,u),o=void 0,u=null)},c=()=>{r&&l(),t()};let n=null;const d=()=>{n!=null&&clearTimeout(n),n=setTimeout(()=>{n=null,c()},p)},a=()=>{n!==null&&(clearTimeout(n),n=null)},t=()=>{a(),o=void 0,u=null},b=()=>{a(),l()},h=function(...m){if(e!=null&&e.aborted)return;o=this,u=m;const y=n==null;d(),s&&y&&l()};return h.schedule=d,h.cancel=t,h.flush=b,e==null||e.addEventListener("abort",t,{once:!0}),h}function w(f,p=0,e={}){typeof e!="object"&&(e={});const{signal:i,leading:o=!1,trailing:u=!0,maxWait:s}=e,r=Array(2);o&&(r[0]="leading"),u&&(r[1]="trailing");let l,c=null;const n=T(function(...t){l=f.apply(this,t),c=null},p,{signal:i,edges:r}),d=function(...t){if(s!=null){if(c===null)c=Date.now();else if(Date.now()-c>=s)return l=f.apply(this,t),c=Date.now(),n.cancel(),n.schedule(),l}return n.apply(this,t),l},a=()=>(n.flush(),l);return d.cancel=n.cancel,d.flush=a,d}export{w as d};

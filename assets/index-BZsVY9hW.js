import{r,R as L}from"./index-qCb0-TeD.js";import{c as k}from"./index-DbGQkxQ5.js";import{i as Q}from"./isVisible-DhUEo0yb.js";import{J as X,d as Z,w as E,B as ee,p as A,b as I,u as te,x as ne,s as oe,q as re}from"./omit-LJmhX_jk.js";import{c as se}from"./reactNode-CVIZC-dj.js";import{_ as ae,d as ie}from"./presets-fZzeZ6Sn.js";import{R as ue}from"./index-fivQpuRm.js";import{_ as D,a as g}from"./asyncToGenerator-CUe5B5qN.js";var h=ae({},ue),ce=h.version,S=h.render,le=h.unmountComponentAtNode,y;try{var de=Number((ce||"").split(".")[0]);de>=18&&(y=h.createRoot)}catch{}function $(e){var t=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&ie(t)==="object"&&(t.usingClientEntryPoint=e)}var C="__rc_react_root__";function fe(e,t){$(!0);var n=t[C]||y(t);$(!1),n.render(e),t[C]=n}function me(e,t){S==null||S(e,t)}function pe(e,t){if(y){fe(e,t);return}me(e,t)}function ve(e){return W.apply(this,arguments)}function W(){return W=D(g().mark(function e(t){return g().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Promise.resolve().then(function(){var s;(s=t[C])===null||s===void 0||s.unmount(),delete t[C]}));case 1:case"end":return o.stop()}},e)})),W.apply(this,arguments)}function be(e){le(e)}function Re(e){return x.apply(this,arguments)}function x(){return x=D(g().mark(function e(t){return g().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(y===void 0){o.next=2;break}return o.abrupt("return",ve(t));case 2:be(t);case 3:case"end":return o.stop()}},e)})),x.apply(this,arguments)}const he=(e,t)=>(pe(e,t),()=>Re(t));let _e=he;function Ee(){return _e}const ge=e=>{const{componentCls:t,colorPrimary:n}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${n})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},Ce=X("Wave",e=>[ge(e)]),U=`${Z}-wave-target`;function w(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function ye(e){const{borderTopColor:t,borderColor:n,backgroundColor:o}=getComputedStyle(e);return w(t)?t:w(n)?n:w(o)?o:null}function N(e){return Number.isNaN(e)?0:e}const Se=e=>{const{className:t,target:n,component:o,registerUnmount:s}=e,u=r.useRef(null),c=r.useRef(null);r.useEffect(()=>{c.current=s()},[]);const[d,_]=r.useState(null),[f,a]=r.useState([]),[p,v]=r.useState(0),[B,j]=r.useState(0),[P,q]=r.useState(0),[F,z]=r.useState(0),[M,H]=r.useState(!1),T={left:p,top:B,width:P,height:F,borderRadius:f.map(l=>`${l}px`).join(" ")};d&&(T["--wave-color"]=d);function O(){const l=getComputedStyle(n);_(ye(n));const i=l.position==="static",{borderLeftWidth:m,borderTopWidth:b}=l;v(i?n.offsetLeft:N(-parseFloat(m))),j(i?n.offsetTop:N(-parseFloat(b))),q(n.offsetWidth),z(n.offsetHeight);const{borderTopLeftRadius:R,borderTopRightRadius:G,borderBottomLeftRadius:K,borderBottomRightRadius:Y}=l;a([R,G,Y,K].map(J=>N(parseFloat(J))))}if(r.useEffect(()=>{if(n){const l=E(()=>{O(),H(!0)});let i;return typeof ResizeObserver<"u"&&(i=new ResizeObserver(O),i.observe(n)),()=>{E.cancel(l),i==null||i.disconnect()}}},[]),!M)return null;const V=(o==="Checkbox"||o==="Radio")&&(n==null?void 0:n.classList.contains(U));return r.createElement(ee,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(l,i)=>{var m,b;if(i.deadline||i.propertyName==="opacity"){const R=(m=u.current)===null||m===void 0?void 0:m.parentElement;(b=c.current)===null||b===void 0||b.call(c).then(()=>{R==null||R.remove()})}return!1}},(l,i)=>{let{className:m}=l;return r.createElement("div",{ref:A(u,i),className:k(t,m,{"wave-quick":V}),style:T})})},we=(e,t)=>{var n;const{component:o}=t;if(o==="Checkbox"&&!(!((n=e.querySelector("input"))===null||n===void 0)&&n.checked))return;const s=document.createElement("div");s.style.position="absolute",s.style.left="0px",s.style.top="0px",e==null||e.insertBefore(s,e==null?void 0:e.firstChild);const u=Ee();let c=null;function d(){return c}c=u(r.createElement(Se,Object.assign({},t,{target:e,registerUnmount:d})),s)},Ne=(e,t,n)=>{const{wave:o}=r.useContext(I),[,s,u]=te(),c=ne(f=>{const a=e.current;if(o!=null&&o.disabled||!a)return;const p=a.querySelector(`.${U}`)||a,{showEffect:v}=o||{};(v||we)(p,{className:t,token:s,component:n,event:f,hashId:u})}),d=r.useRef(null);return f=>{E.cancel(d.current),d.current=E(()=>{c(f)})}},Ie=e=>{const{children:t,disabled:n,component:o}=e,{getPrefixCls:s}=r.useContext(I),u=r.useRef(null),c=s("wave"),[,d]=Ce(c),_=Ne(u,k(c,d),o);if(L.useEffect(()=>{const a=u.current;if(!a||a.nodeType!==1||n)return;const p=v=>{!Q(v.target)||!a.getAttribute||a.getAttribute("disabled")||a.disabled||a.className.includes("disabled")||a.className.includes("-leave")||_(v)};return a.addEventListener("click",p,!0),()=>{a.removeEventListener("click",p,!0)}},[n]),!L.isValidElement(t))return t??null;const f=oe(t)?A(re(t),u):u;return se(t,{ref:f})};export{U as T,Ie as W,Ee as g};

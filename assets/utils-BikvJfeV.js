import{d as S}from"./debounce-DBoK0mBS.js";import{u as _}from"./useHandler-HI23tEoY.js";import{c as b,s as k}from"./traditional-B_ldJKp3.js";import{r as p}from"./index-qCb0-TeD.js";import{n as y}from"./noop-DX6rZLP_.js";import{c as V}from"./emotion-react.browser.esm-DKbCFQzN.js";import{d as v,a as w,f as z}from"./index-gEP6Tn1u.js";import{s as H}from"./index-FhjP52Um.js";function U(e,t=0,r={}){typeof r!="object"&&(r={});const{leading:o=!0,trailing:l=!0,signal:s}=r;return S(e,t,{leading:o,trailing:l,signal:s,maxWait:t})}const i=[];function c(e){const t=_("before"in e?e.before:y),r=_("after"in e?e.after:y),o=p.useMemo(()=>({element:e.element,before:t,after:r}),[e.element,t,r]);p.useEffect(()=>(i.push(o),function(){for(;i.includes(o);)i.splice(i.indexOf(o),1)}),[o])}function E(e){return c(e),null}function T(e){const t=b()(()=>({outerEl:null}),k);function r(l){t.setState({outerEl:l})}const o=new WeakMap;return t.subscribe((l,s)=>{if(l.outerEl===s.outerEl)return;const u=i.filter(f=>e.contains(f.element));(()=>{var h;if(!l.outerEl){const a=u.map(n=>n.before());u.forEach((n,P)=>o.set(n,a[P])),(h=s.outerEl)==null||h.removeChild(e);return}if([...l.outerEl.children].includes(e))return;l.outerEl.appendChild(e),u.flatMap(a=>{if(!o.has(a))return[];const n=o.get(a);return[{hook:a,hookArgs:n}]}).forEach(({hook:a,hookArgs:n})=>a.after(n))})()}),{setOuterEl:r}}function d({scrollElement:e,virtualizer:t}){c({element:e,before(){return t.scrollOffset},after(r){t.scrollToOffset(r)}})}const g=({scrollElement:e,virtualizer:t})=>(d({scrollElement:e,virtualizer:t}),null);function x(e){const t=document.createElement(e);return{setOuterEl:T(t).setOuterEl,innerEl:t}}function m(e){return function(){const[r]=p.useState(()=>x(e));return r}}const W=m("div");try{m.displayName="createUsePortal",m.__docgenInfo={description:"Create a in-component portal utility hook.",displayName:"createUsePortal",props:{}}}catch{}try{g.displayName="FixPortalVirtualizerScroll",g.__docgenInfo={description:"Component version of `useFixPortalVirtualizerScroll`.",displayName:"FixPortalVirtualizerScroll",props:{scrollElement:{defaultValue:null,description:"",name:"scrollElement",required:!0,type:{name:"HTMLElement"}},virtualizer:{defaultValue:null,description:"",name:"virtualizer",required:!0,type:{name:"Virtualizer<Element, Element>"}}}}}catch{}try{d.displayName="useFixPortalVirtualizerScroll",d.__docgenInfo={description:`When the innerEl is appended to another element, all scrollable elements will
scroll to the top. Since no events are triggered, the virtualizer scrolls to
the top without re-rendering the content. To address this issue, we need to
manually scroll the virtualizer back to the previous scroll position after
the innerEl is appended to the new outerEl.

- Asana: [Intersection Observer with
  Portal](https://app.asana.com/0/1202106311174078/1207859080999040/f)
- Slack:
  [#product-caac](https://chatbotgang.slack.com/archives/C02R6ETJMEY/p1721641017239759)`,displayName:"useFixPortalVirtualizerScroll",props:{scrollElement:{defaultValue:null,description:"",name:"scrollElement",required:!0,type:{name:"HTMLElement"}},virtualizer:{defaultValue:null,description:"",name:"virtualizer",required:!0,type:{name:"Virtualizer<Element, Element>"}}}}}catch{}try{E.displayName="UsePortalSwitchHook",E.__docgenInfo={description:"Component version of `usePortalSwitchHook`.",displayName:"UsePortalSwitchHook",props:{element:{defaultValue:null,description:"",name:"element",required:!0,type:{name:"HTMLElement"}},after:{defaultValue:null,description:"",name:"after",required:!1,type:{name:"(() => void) | ((prev: TArgs) => void)"}},before:{defaultValue:null,description:"",name:"before",required:!0,type:{name:"() => TArgs"}}}}}catch{}try{c.displayName="usePortalSwitchHook",c.__docgenInfo={description:"Do something before and after the portal element is switched.",displayName:"usePortalSwitchHook",props:{element:{defaultValue:null,description:"",name:"element",required:!0,type:{name:"HTMLElement"}},after:{defaultValue:null,description:"",name:"after",required:!1,type:{name:"(() => void) | ((prev: TArgs) => void)"}},before:{defaultValue:null,description:"",name:"before",required:!0,type:{name:"() => TArgs"}}}}}catch{}const L=v({portal:V({">*":[w,z]},";label:emotion-portal;")}),j=H(.3);export{j as a,L as s,U as t,W as u};

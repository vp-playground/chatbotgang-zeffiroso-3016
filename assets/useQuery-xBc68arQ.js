import{r as c}from"./index-qCb0-TeD.js";import{a as y,n as a,b as d,p}from"./useMutation-BNzakrCb.js";import{u as b,a as R,e as g,b as C,c as E,s as m,f as S,g as h,Q}from"./suspense-lUpQ7myJ.js";function O(o,i){const n=y({context:o.context}),s=b(),u=R(),e=n.defaultQueryOptions(o);e._optimisticResults=s?"isRestoring":"optimistic",e.onError&&(e.onError=a.batchCalls(e.onError)),e.onSuccess&&(e.onSuccess=a.batchCalls(e.onSuccess)),e.onSettled&&(e.onSettled=a.batchCalls(e.onSettled)),g(e),C(e,u),E(u);const[r]=c.useState(()=>new i(n,e)),t=r.getOptimisticResult(e);if(d(c.useCallback(l=>{const f=s?()=>{}:r.subscribe(a.batchCalls(l));return r.updateResult(),f},[r,s]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),c.useEffect(()=>{r.setOptions(e,{listeners:!1})},[e,r]),m(e,t,s))throw S(e,r,u);if(h({result:t,errorResetBoundary:u,useErrorBoundary:e.useErrorBoundary,query:r.getCurrentQuery()}))throw t.error;return e.notifyOnChangeProps?t:r.trackResult(t)}function w(o,i,n){const s=p(o,i,n);return O(s,Q)}export{O as a,w as u};

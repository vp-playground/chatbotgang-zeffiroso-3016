import{j as a,a as O}from"./emotion-react-jsx-runtime.browser.esm-B6nDGTOp.js";import{c as h}from"./emotion-react.browser.esm-DKbCFQzN.js";import{t as f}from"./index-BA0eH0Wu.js";import{a as Et}from"./assignDisplayName-lT0r0-ot.js";import{u as C}from"./useHandler-HI23tEoY.js";import{r as u}from"./index-qCb0-TeD.js";import{g as St,f as Tt}from"./whatsAppAttachment-Dl_LDQ-f.js";import{T as Mt}from"./Trans-B7RBgX3a.js";import{d as A}from"./index-gEP6Tn1u.js";import{r as Vt}from"./random-CmfFXdz5.js";import{c as kt}from"./index-DbGQkxQ5.js";import{F as Rt}from"./Format-D7iIqQe4.js";import{o as jt}from"./index-Bf2qc8Rt.js";import{s as $t}from"./index-FhjP52Um.js";import{t as Ct}from"./index-CrYrvawI.js";import{r as Ft}from"./index-C5U6HIMD.js";import"./jsx-runtime-DzlC0hKS.js";import"./inspectMessage-DlwZE6zu.js";import"./index-BAiONZ7V.js";import"./define-D3i8B5cg.js";import"./types-Dn-G_zsM.js";import"./traditional-B_ldJKp3.js";import"./index-DzgdUzM0.js";import"./index-iJUMMFGI.js";import"./index-MOlr3Ojg.js";import"./index-BsfIDxJ3.js";import"./index-CatqC4ig.js";import"./property-DTA7hnOA.js";import"./get-DGJ4vF0c.js";import"./vanilla-DtBHub2h.js";import"./capitalize-CY0R7VOI.js";import"./useEventCallback-HuInTmxh.js";import"./models-D08OMJcb.js";import"./literalUnion-DyVqFjOM.js";import"./Iso4217CurrencySchema-I5Px3Rsp.js";import"./StringToNumberSchema-DICqxOFk.js";import"./WeekdayNumberSchema-CgxigkyA.js";import"./index-BQ-NB-n4.js";import"./index-CK730dNH.js";import"./index-DN361_u3.js";import"./index-CmqFZ15x.js";import"./index-8L6fjrd-.js";import"./pick-DYnZlk75.js";import"./pick-BRmevVyy.js";import"./isArguments-DZsL9lab.js";import"./tags-CpduBB1M.js";import"./sentry-DXsovuw2.js";import"./noop-DX6rZLP_.js";import"./isSymbol-DeEarUMJ.js";import"./isArrayLike-CCcVsAV0.js";import"./isNil-C7mktj5T.js";import"./index-Ctp16WHO.js";import"./delay-CaiE5JvH.js";import"./useMutation-BNzakrCb.js";import"./useQuery-xBc68arQ.js";import"./suspense-lUpQ7myJ.js";import"./infiniteQueryBehavior-B_QQvG9O.js";import"./tslib.es6-Ce0R1J-V.js";import"./isPrimitive-CtkJ6J5I.js";import"./env-B2Oq9Sof.js";import"./appConstant-DrkG7OWi.js";import"./debounce-DBoK0mBS.js";import"./omitBy-DH6X2eoo.js";import"./index-CwLK_-iS.js";import"./isPrimitive-Cbvsya_l.js";import"./flow-Caod8tMH.js";import"./flow-DLnCjMlr.js";import"./snakeCase-zsbFOLKH.js";import"./memo-BZYTsoqr.js";import"./getDisplayName-Cdt1H-sM.js";import"./useTranslation-XVYQH2mr.js";import"./useDateTimeFormat-DrOd5fwV.js";import"./useLanguage-Cw5TNOAB.js";import"./merge-BUZDYRsv.js";import"./cloneDeepWith-ktajmmvU.js";import"./isTypedArray-CzKvdEgb.js";function Bt(t){Ft(1,arguments);var e=Ct(t);return e.setDate(1),e.setHours(0,0,0,0),e}function zt(t,e){const o={};for(let r=0;r<t.length;r++){const n=t[r],i=e(n);Object.hasOwn(o,i)||(o[i]=[]),o[i].push(n)}return o}const qt=St.client,Ut=St.utils,Ht=A({bottom:h({color:f.colors.neutral007,padding:"8px 0",fontSize:"0.75rem",textAlign:"center"},";label:emotion-bottom;")}),F=t=>a("div",{css:Ht.bottom,...t,children:a(Mt,{i18nKey:"layout.nav.notifications.bottom"})});try{F.displayName="BottomOfList",F.__docgenInfo={description:"",displayName:"BottomOfList",props:{}}}catch{}const Wt=""+new URL("empty-CZ8CdwAt.png",import.meta.url).href,$=A({Empty:{name:"rsos79-emotion-Empty",styles:"display:flex;flex-direction:column;text-align:center;padding:20px 0;margin:auto 0;gap:8px;label:emotion-Empty;"},image:{name:"ltbdgb-emotion-image",styles:"width:80px;label:emotion-image;"},desc:h({fontSize:"0.75rem",color:f.colors.neutral007},";label:emotion-desc;")}),Yt=()=>O("div",{css:$.Empty,children:[a("div",{children:a("img",{src:Wt,alt:"empty",css:$.image})}),a("span",{css:$.desc,children:a(Mt,{i18nKey:"layout.nav.notifications.empty.desc"})})]}),Gt=Vt(),Pt=`monthly-group-list-item-${Gt}-`,Ot={title:`${Pt}title`},At=A({titleBox:h({backgroundColor:f.colors.neutral001,color:f.colors.neutral007,fontSize:"0.875rem",padding:"8px 16px",position:"sticky",textAlign:"left",top:0,width:"100%"},";label:emotion-titleBox;")}),Kt=({month:t,children:e,...o})=>O("li",{...o,children:[a("div",{css:At.titleBox,className:kt(Ot.title),children:a(Rt,{date:t,options:{dateTimeFormatOptions:{month:"long",year:"numeric"}}})}),a("ul",{children:e})]}),B=Object.assign(Kt,{styles:At,classNameRecord:Ot});try{B.displayName="MonthlyGroupListItem",B.__docgenInfo={description:"",displayName:"MonthlyGroupListItem",props:{month:{defaultValue:null,description:"",name:"month",required:!0,type:{name:"Date"}}}}}catch{}var z=new Map,D=new WeakMap,P=0,Qt=void 0;function Zt(t){return t?(D.has(t)||(P+=1,D.set(t,P.toString())),D.get(t)):"0"}function Jt(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?Zt(t.root):t[e]}`).toString()}function Xt(t){const e=Jt(t);let o=z.get(e);if(!o){const r=new Map;let n;const i=new IntersectionObserver(l=>{l.forEach(s=>{var m;const c=s.isIntersecting&&n.some(d=>s.intersectionRatio>=d);t.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=c),(m=r.get(s.target))==null||m.forEach(d=>{d(c,s)})})},t);n=i.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),o={id:e,observer:i,elements:r},z.set(e,o)}return o}function te(t,e,o={},r=Qt){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const m=t.getBoundingClientRect();return e(r,{isIntersecting:r,target:t,intersectionRatio:typeof o.threshold=="number"?o.threshold:0,time:0,boundingClientRect:m,intersectionRect:m,rootBounds:m}),()=>{}}const{id:n,observer:i,elements:l}=Xt(o),s=l.get(t)||[];return l.has(t)||l.set(t,s),s.push(e),i.observe(t),function(){s.splice(s.indexOf(e),1),s.length===0&&(l.delete(t),i.unobserve(t)),l.size===0&&(i.disconnect(),z.delete(n))}}function ee({threshold:t,delay:e,trackVisibility:o,rootMargin:r,root:n,triggerOnce:i,skip:l,initialInView:s,fallbackInView:m,onChange:c}={}){var d;const[b,Lt]=u.useState(null),T=u.useRef(),[V,W]=u.useState({inView:!!s,entry:void 0});T.current=c,u.useEffect(()=>{if(l||!b)return;let w;return w=te(b,(G,j)=>{W({inView:G,entry:j}),T.current&&T.current(G,j),j.isIntersecting&&i&&w&&(w(),w=void 0)},{root:n,rootMargin:r,threshold:t,trackVisibility:o,delay:e},m),()=>{w&&w()}},[Array.isArray(t)?t.toString():t,b,n,r,i,l,o,m,e]);const k=(d=V.entry)==null?void 0:d.target,Y=u.useRef();!b&&k&&!i&&!l&&Y.current!==k&&(Y.current=k,W({inView:!!s,entry:void 0}));const g=[Lt,V.inView,V.entry];return g.ref=g[0],g.inView=g[1],g.entry=g[2],g}const y=A({Notification:h({display:"flex",flexDirection:"column",gap:"8px",padding:"16px",borderBottom:`1px solid ${f.colors.neutral003}`,width:"100%",fontSize:"0.875rem"},";label:emotion-Notification;"),titleRow:{name:"go9ukp-emotion-titleRow",styles:"display:flex;justify-content:space-between;label:emotion-titleRow;"},title:h({fontWeight:500,color:f.colors.neutral010},";label:emotion-title;"),content:h({color:f.colors.neutral009},";label:emotion-content;"),createdAt:h({color:f.colors.neutral007},";label:emotion-createdAt;"),dot:h({"--size":"6px",background:f.colors.red005,height:"var(--size)",width:"var(--size)",borderRadius:"50%"},";label:emotion-dot;")}),oe=u.forwardRef(function({notification:e,onRead:o,...r},n){const i=ee(),l=C(()=>{e.read||o==null||o({notification:e,inView:i})}),s=!!(i.inView&&!e.read),[m]=u.useState(()=>e.read);u.useEffect(()=>{if(!s)return;const d=setTimeout(l,$t(.5));return function(){clearTimeout(d)}},[l,s]);const c=u.useMemo(()=>jt([n,i.ref]),[n,i.ref]);return O("li",{css:y.Notification,ref:c,...r,children:[O("div",{css:y.titleRow,children:[a("span",{css:y.title,children:e.title}),m?null:a("span",{css:y.dot})]}),a("div",{css:y.content,children:e.body}),a("div",{css:y.createdAt,children:a(Rt,{date:e.createdAt,options:{dateTimeFormatOptions:{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hourCycle:"h23"}}})})]})}),q=Object.assign(oe,{styles:y});try{q.displayName="NotificationListItem",q.__docgenInfo={description:"",displayName:"NotificationListItem",props:{notification:{defaultValue:null,description:"",name:"notification",required:!0,type:{name:"CantataTypes"}},onRead:{defaultValue:null,description:"",name:"onRead",required:!1,type:{name:"(notification: { notification: CantataTypes; inView: InViewHookResponse; }) => void"}}}}}catch{}const re=t=>u.useMemo(()=>Object.entries(zt(t,o=>Bt(o.createdAt).toISOString())).map(([o,r])=>({month:new Date(o),notifications:[...r].sort((n,i)=>i.createdAt.valueOf()-n.createdAt.valueOf())})).sort((o,r)=>r.month.valueOf()-o.month.valueOf()),[t]),U=A({wrapper:{name:"hw8h0e-emotion-wrapper",styles:"display:flex;flex-direction:column;flex:1 1 0%;overflow-y:scroll;label:emotion-wrapper;"},list:{name:"rncnje-emotion-list",styles:"display:flex;flex-direction:column;margin:0;list-style:none;label:emotion-list;"}}),ie=({notifications:t,...e})=>{const o=Tt(c=>c.value),r=re(t),n=u.useRef(null),i=Ut.useInvalidateQueries(),l=C(async({notification:c})=>{await qt.markInternalNotificationAsRead(void 0,{params:{orgId:o,notificationId:c.id}}),i()}),s=u.useMemo(function(){return t.findLast(d=>!d.read)},[t]),m=C(()=>{if(!s||!n.current)return;const c=n.current.querySelector(`[data-notification-id="${s.id}"]`);c&&c.scrollIntoView({behavior:"auto",block:"end"})});return u.useEffect(()=>{m()},[m]),r.length===0?a(Yt,{}):O("div",{css:U.wrapper,ref:n,...e,children:[a("ul",{css:U.list,children:r.map(c=>a(B,{month:c.month,children:c.notifications.map(d=>a(q,{notification:d,onRead:l,"data-notification-id":d.id},d.id))},c.month.toISOString()))}),a(F,{})]})},L=Object.assign(ie,{styles:U});Et(L,"InternalNotificationList");try{L.displayName="InternalNotificationList",L.__docgenInfo={description:"List of all internal notifications.",displayName:"InternalNotificationList",props:{css:{defaultValue:null,description:"",name:"css",required:!1,type:{name:"SerializedStyles"}},notifications:{defaultValue:null,description:"",name:"notifications",required:!0,type:{name:"CantataTypes[]"}}}}}catch{}const v=(t,e,o,r,n)=>({id:t,title:e,body:o,createdAt:r,read:n}),p=new Date("2021-01-01T00:00:00Z"),R=new Date(p);R.setMonth(p.getMonth()-1);const H=new Date(p);H.setMonth(p.getMonth()-2);const Dt=[v(1,"System Maintenance","Our platform will undergo scheduled maintenance this weekend. Please expect brief downtime.",new Date(p.getFullYear(),p.getMonth(),p.getDate()-2,1,23),!1),v(2,"New Feature Released","We've just released a new collaboration feature. Check it out in your dashboard!",new Date(p.getFullYear(),p.getMonth(),p.getDate()-5,23,59),!0),v(3,"Security Update","We've improved our security measures. No action required from your side.",new Date(p.getFullYear(),p.getMonth(),p.getDate()-7),!0)],ne=[v(4,"User Feedback Survey","Help us improve! Please take a moment to complete our user satisfaction survey.",new Date(R.getFullYear(),R.getMonth(),25),!0),v(5,"Account Verification","Please verify your account by clicking the link sent to your email.",new Date(R.getFullYear(),R.getMonth(),15),!0)],se=[v(6,"Welcome Aboard!","Thank you for joining our platform. We're excited to have you with us!",new Date(H.getFullYear(),H.getMonth(),10),!0)],E=[...Dt,...ne,...se],Do={component:L,title:"Resources/Internal Notification/InternalNotificationList",parameters:{layout:"centered"},decorators:[t=>a("div",{css:h({display:"flex",flexDirection:"column",maxHeight:"600px",width:"400px",border:`1px solid ${f.colors.neutral003}`,borderRadius:"8px"},";label:emotion-decorators;"),children:a(t,{})})]},N={args:{notifications:E}},x={args:{notifications:Dt}},I={args:{notifications:E}},_={args:{notifications:[]}},S={args:{notifications:E.map(t=>({...t,read:!0}))}},M={args:{notifications:E.map(t=>({...t,read:!1}))}};var K,Q,Z,J,X;N.parameters={...N.parameters,docs:{...(K=N.parameters)==null?void 0:K.docs,source:{originalSource:`{
  args: {
    notifications: allNotifications
  }
}`,...(Z=(Q=N.parameters)==null?void 0:Q.docs)==null?void 0:Z.source},description:{story:"Default view with a mix of read and unread notifications across different months",...(X=(J=N.parameters)==null?void 0:J.docs)==null?void 0:X.description}}};var tt,et,ot,rt,it;x.parameters={...x.parameters,docs:{...(tt=x.parameters)==null?void 0:tt.docs,source:{originalSource:`{
  args: {
    notifications: recentNotifications
  }
}`,...(ot=(et=x.parameters)==null?void 0:et.docs)==null?void 0:ot.source},description:{story:"Shows how the component looks with only notifications from the current month",...(it=(rt=x.parameters)==null?void 0:rt.docs)==null?void 0:it.description}}};var nt,st,at,ct,lt;I.parameters={...I.parameters,docs:{...(nt=I.parameters)==null?void 0:nt.docs,source:{originalSource:`{
  args: {
    notifications: allNotifications
  }
}`,...(at=(st=I.parameters)==null?void 0:st.docs)==null?void 0:at.source},description:{story:"Shows how the component looks with notifications from multiple months",...(lt=(ct=I.parameters)==null?void 0:ct.docs)==null?void 0:lt.description}}};var mt,dt,pt,ut,ft;_.parameters={..._.parameters,docs:{...(mt=_.parameters)==null?void 0:mt.docs,source:{originalSource:`{
  args: {
    notifications: []
  }
}`,...(pt=(dt=_.parameters)==null?void 0:dt.docs)==null?void 0:pt.source},description:{story:"Shows how the component handles having no notifications with an empty state",...(ft=(ut=_.parameters)==null?void 0:ut.docs)==null?void 0:ft.description}}};var ht,gt,yt,wt,vt;S.parameters={...S.parameters,docs:{...(ht=S.parameters)==null?void 0:ht.docs,source:{originalSource:`{
  args: {
    notifications: allNotifications.map(notification => ({
      ...notification,
      read: true
    }))
  }
}`,...(yt=(gt=S.parameters)==null?void 0:gt.docs)==null?void 0:yt.source},description:{story:"Shows notifications with all of them marked as read",...(vt=(wt=S.parameters)==null?void 0:wt.docs)==null?void 0:vt.description}}};var bt,Nt,xt,It,_t;M.parameters={...M.parameters,docs:{...(bt=M.parameters)==null?void 0:bt.docs,source:{originalSource:`{
  args: {
    notifications: allNotifications.map(notification => ({
      ...notification,
      read: false
    }))
  }
}`,...(xt=(Nt=M.parameters)==null?void 0:Nt.docs)==null?void 0:xt.source},description:{story:"Shows notifications with all of them marked as unread",...(_t=(It=M.parameters)==null?void 0:It.docs)==null?void 0:_t.description}}};const Lo=["Default","CurrentMonthOnly","MultipleMonths","Empty","AllRead","AllUnread"];export{S as AllRead,M as AllUnread,x as CurrentMonthOnly,N as Default,_ as Empty,I as MultipleMonths,Lo as __namedExportsOrder,Do as default};

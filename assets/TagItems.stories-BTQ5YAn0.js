import{a as A,j as s}from"./emotion-react-jsx-runtime.browser.esm-B6nDGTOp.js";import{u as h}from"./useHandler-HI23tEoY.js";import{d as w}from"./delay-CaiE5JvH.js";import{r as y}from"./index-qCb0-TeD.js";import{j as q,c as E}from"./emotion-react.browser.esm-DKbCFQzN.js";import{u as k}from"./index-DPz6_WSv.js";import{t as M}from"./index-BA0eH0Wu.js";import{B as F}from"./index-DIYPjkqE.js";import{S as j}from"./ShowMoreButton-D-bf6Owm.js";import{u as W}from"./DisabledContext-t2QVHVjL.js";import{T as B}from"./index-CbeUjcWn.js";import{T as R}from"./TagSelector-WXljRENS.js";import{d as z}from"./index-gEP6Tn1u.js";import{u as H}from"./useTranslation-XVYQH2mr.js";import{u as S}from"./useMutation-BNzakrCb.js";import{s as _}from"./index-FhjP52Um.js";import"./jsx-runtime-DzlC0hKS.js";import"./useEventCallback-HuInTmxh.js";import"./index-C4jkG3Yz.js";import"./inspectMessage-DlwZE6zu.js";import"./index-BAiONZ7V.js";import"./define-D3i8B5cg.js";import"./types-Dn-G_zsM.js";import"./traditional-B_ldJKp3.js";import"./index-CrYrvawI.js";import"./index-C5U6HIMD.js";import"./index-DzgdUzM0.js";import"./index-iJUMMFGI.js";import"./index-MOlr3Ojg.js";import"./index-BsfIDxJ3.js";import"./index-CatqC4ig.js";import"./property-DTA7hnOA.js";import"./get-DGJ4vF0c.js";import"./vanilla-DtBHub2h.js";import"./capitalize-CY0R7VOI.js";import"./random-CmfFXdz5.js";import"./index-_xFncG76.js";import"./index-DbGQkxQ5.js";import"./env-B2Oq9Sof.js";import"./StringToNumberSchema-DICqxOFk.js";import"./index-BQ-NB-n4.js";import"./appConstant-DrkG7OWi.js";import"./index-8L6fjrd-.js";import"./debounce-DBoK0mBS.js";import"./omitBy-DH6X2eoo.js";import"./assignDisplayName-lT0r0-ot.js";import"./getDisplayName-Cdt1H-sM.js";import"./index-Bf2qc8Rt.js";import"./sentry-DXsovuw2.js";import"./tags-CpduBB1M.js";import"./noop-DX6rZLP_.js";import"./flow-Caod8tMH.js";import"./flow-DLnCjMlr.js";import"./uniq-BL7hiWVS.js";import"./isArrayLike-CCcVsAV0.js";import"./react-CzPQQEyf.js";import"./shouldProcessLinkClick-Cauo1FQC.js";import"./pathe.ff20891b-CZu1kPQR.js";import"./button-B7-d1yET.js";import"./omit-LJmhX_jk.js";import"./presets-fZzeZ6Sn.js";import"./DisabledContext-NEMnJEZA.js";import"./index-fivQpuRm.js";import"./index-CmoHrzZA.js";import"./index-BZsVY9hW.js";import"./isVisible-DhUEo0yb.js";import"./reactNode-CVIZC-dj.js";import"./asyncToGenerator-CUe5B5qN.js";import"./useSize-XLj32eBt.js";import"./Compact-VphdgA5n.js";import"./presetColors-DLnX3ho6.js";import"./LoadingOutlined-PTw75qLp.js";import"./AntdIcon-C0KfWvva.js";import"./shadow-smhd3i8u.js";import"./compact-item-5orumCwJ.js";import"./index-DN361_u3.js";import"./Trans-B7RBgX3a.js";import"./memo-BZYTsoqr.js";import"./omit-C4DMN5cy.js";import"./cloneDeepWith-ktajmmvU.js";import"./isPrimitive-CtkJ6J5I.js";import"./index-Bi4bWNG0.js";import"./colors-wf8q_7Rm.js";import"./useClosable-D7Zcp99m.js";import"./CloseOutlined-CfOpPp0C.js";import"./pickAttrs-XdSaTJtx.js";import"./safeString-CSiFDyUi.js";import"./NotFoundContent-42rRWz8w.js";import"./Empty-Wvpx-ZQe.js";import"./index-B04UsWsO.js";import"./index-BVhqM5T_.js";import"./toConsumableArray-BjwuTSou.js";import"./index-NCLGaooH.js";import"./Portal-qV56MC8h.js";import"./useId-CkKFPa5_.js";import"./KeyCode-lh1qUinJ.js";import"./Overflow-DF_X_I1g.js";import"./List-BcMJ_vkB.js";import"./useZIndex-BbbELKB6.js";import"./motion-DdkSFxyu.js";import"./PurePanel-Bml8ml_A.js";import"./useVariants-CK8wnbnE.js";import"./context-bgT8s9yI.js";import"./useLocale-D6ZQsxC3.js";import"./useCSSVarCls-DCHdCyfl.js";import"./DownOutlined-C-IxbET4.js";import"./CheckOutlined-DcewmLkY.js";import"./CloseCircleFilled-Bgzza4Eo.js";import"./SearchOutlined-CS-6PfVh.js";import"./isArguments-DZsL9lab.js";import"./isTypedArray-CzKvdEgb.js";import"./isPrototype-BXSxwdi2.js";const I=z({root:{name:"1k2zorm-emotion-root",styles:"display:flex;flex-direction:column;align-items:flex-start;gap:8px;label:emotion-root;"},tagsContainer:{name:"1x2akmw-emotion-tagsContainer",styles:"display:flex;flex-flow:row wrap;gap:8px;label:emotion-tagsContainer;"},warning:E({color:M.colors.red006},";label:emotion-warning;"),noData:E({color:M.colors.neutral007,minHeight:60},";label:emotion-noData;")}),b=({value:e=[],allTags:n,collapsedSize:t=Number.POSITIVE_INFINITY,expanded:p,onExpandedChanged:d,tagSelectorProps:o,...f})=>{const{t:c}=H(),[x,u]=k(!1),[i,r]=k(!1,p,d),m=y.useMemo(()=>e&&(e.length===0||i||e.length<=t?e:e.slice(0,t)),[t,i,e]),g=S({mutationFn:async(...a)=>await(o==null?void 0:o.onAddTag(...a)),onSettled:u.off}),C=S({mutationFn:async(...a)=>await(o==null?void 0:o.onCreateTag(...a)),onSettled:u.off}),D=g.isLoading||C.isLoading,V=y.useMemo(()=>n==null?void 0:n.filter(a=>!e.some(({key:l})=>l===a.key)),[n,e]),N=y.useMemo(()=>n==null?void 0:n.filter(a=>e.some(({key:l})=>l===a.key)),[n,e]),O=W();return A("div",{css:I.root,children:[o?x?s(R,{autoFocus:!0,style:{width:"100%",...o==null?void 0:o.style},...o,selectableTags:V,unSelectableTags:N,onAddTag:g.mutateAsync,onCreateTag:C.mutateAsync}):s("div",{style:{display:"flex",gap:8,justifyContent:"space-between",alignItems:"center",width:"100%"},children:A(F,{style:{padding:0,lineHeight:"normal",height:"auto"},type:"link",onClick:u.on,loading:D,disabled:O(D),children:["+ ",c("common.addTags")]})}):null,e.length===0?"noData"in f?f.noData:s("div",{css:I.noData,children:c("common.noData")}):s("div",{css:I.tagsContainer,children:m.map(({key:a,...l})=>q(B,{...l,key:a},l.children??a))}),e.length<=t?null:s(j,{expanded:i,onChange:i?r.off:r.on})]})};try{b.displayName="TagItems",b.__docgenInfo={description:"A component that displays a list of tags.",displayName:"TagItems",props:{allTags:{defaultValue:null,description:`The tags for all selectable tags. It's not required if tags are not
addable or creatable.`,name:"allTags",required:!1,type:{name:"TagSelectorProps"}},value:{defaultValue:{value:"[]"},description:"The selected tags.",name:"value",required:!1,type:{name:"any[]"}},expanded:{defaultValue:null,description:"Whether the tag items are expanded.",name:"expanded",required:!1,type:{name:"boolean"}},onExpandedChanged:{defaultValue:null,description:`The callback function that is triggered when the tag items are expanded or
collapsed.`,name:"onExpandedChanged",required:!1,type:{name:"(expanded: boolean) => void"}},collapsedSize:{defaultValue:{value:"Number.POSITIVE_INFINITY"},description:"The number of tags to show when the tag items are collapsed.",name:"collapsedSize",required:!1,type:{name:"number"}},tagSelectorProps:{defaultValue:null,description:`The props for the tag selector.

If it's not provided, the tag selector will not be shown.`,name:"tagSelectorProps",required:!1,type:{name:'Omit<TagSelectorProps, "tags">'}},noData:{defaultValue:null,description:"The content to display when there is no data.",name:"noData",required:!1,type:{name:"ReactNode"}}}}}catch{}const{useArgs:L}=__STORYBOOK_MODULE_PREVIEW_API__,Qt={component:b};let T=9527;const Y=20,v=Array.from({length:Y},()=>({key:T++,children:`Tag ${T}`,name:`Tag ${T}`})),$=v.map(e=>({...e,name:e.children})),Xt={args:{allTags:$,value:v,collapsedSize:3,latencySec:1,editable:!0},argTypes:{editable:{description:"(Demo) Whether the tags are editable.",control:{type:"boolean"}},collapsedSize:{control:{type:"number",step:1}},latencySec:{description:"(Demo) The latency in seconds.",control:{type:"number"}},expanded:{control:{type:"boolean"}}},render:function(n){const[t,p]=L(),d=t.editable??!1,o=h(async function(r){await w(_(t.latencySec)),p({value:[...t.value??[],r]})}),f=h(async function(r){await w(_(t.latencySec));const m={key:T++,children:r};p({value:[m,...t.value??[]],allTags:[...t.allTags??[],{...m,name:r}]})}),c=h(function(r){var m;p({value:(m=t.value)==null?void 0:m.filter(g=>g.key!==r)})}),x=y.useMemo(()=>{var i;return(i=t.value)==null?void 0:i.map(r=>({...r,closable:d,onClose:async()=>{await w(_(t.latencySec)),c(r.key)}}))},[t.latencySec,t.value,c,d]),u=h(i=>{p({expanded:i})});return s("div",{style:{minWidth:200,maxWidth:400},children:s(b,{...t,value:x,tagSelectorProps:d?{onAddTag:o,onCreateTag:f}:void 0,onExpandedChanged:u})})}},Zt=["Default"];export{Xt as Default,Zt as __namedExportsOrder,Qt as default};

import{a as W,j as m}from"./emotion-react-jsx-runtime.browser.esm-B6nDGTOp.js";import{l as ae}from"./dummy-T6UpgMGd.js";import{i as F}from"./inspectMessage-DlwZE6zu.js";import{a as Fe}from"./assignDisplayName-lT0r0-ot.js";import{u as Ge}from"./useHandler-HI23tEoY.js";import{c as L}from"./emotion-react.browser.esm-DKbCFQzN.js";import{t as G}from"./index-BA0eH0Wu.js";import{e as Je}from"./index-BaJN9MlJ.js";import{c as X,g as Qe,r as J}from"./index-qCb0-TeD.js";import{T as b}from"./Trans-B7RBgX3a.js";import{H as Xe}from"./appConstant-DrkG7OWi.js";import{M as je}from"./index-_xFncG76.js";import{S as $e}from"./index-B04UsWsO.js";import{d as Ye}from"./env-B2Oq9Sof.js";import{d as Pe,c as Ze}from"./index-gEP6Tn1u.js";import{u as er}from"./useTranslation-XVYQH2mr.js";import{s as rr,o as tr,c as se,e as nr}from"./types-Dn-G_zsM.js";import"./jsx-runtime-DzlC0hKS.js";import"./index-BAiONZ7V.js";import"./useEventCallback-HuInTmxh.js";import"./define-D3i8B5cg.js";import"./traditional-B_ldJKp3.js";import"./index-CrYrvawI.js";import"./index-C5U6HIMD.js";import"./index-DzgdUzM0.js";import"./index-iJUMMFGI.js";import"./index-MOlr3Ojg.js";import"./index-BsfIDxJ3.js";import"./index-CatqC4ig.js";import"./property-DTA7hnOA.js";import"./get-DGJ4vF0c.js";import"./vanilla-DtBHub2h.js";import"./capitalize-CY0R7VOI.js";import"./memo-BZYTsoqr.js";import"./getDisplayName-Cdt1H-sM.js";import"./index-FhjP52Um.js";import"./index-8L6fjrd-.js";import"./index-DbGQkxQ5.js";import"./random-CmfFXdz5.js";import"./NotFoundContent-42rRWz8w.js";import"./Empty-Wvpx-ZQe.js";import"./index-BVhqM5T_.js";import"./omit-LJmhX_jk.js";import"./presets-fZzeZ6Sn.js";import"./DisabledContext-NEMnJEZA.js";import"./index-fivQpuRm.js";import"./index-CmoHrzZA.js";import"./toConsumableArray-BjwuTSou.js";import"./index-NCLGaooH.js";import"./Portal-qV56MC8h.js";import"./useSize-XLj32eBt.js";import"./shadow-smhd3i8u.js";import"./useId-CkKFPa5_.js";import"./isVisible-DhUEo0yb.js";import"./KeyCode-lh1qUinJ.js";import"./pickAttrs-XdSaTJtx.js";import"./Overflow-DF_X_I1g.js";import"./List-BcMJ_vkB.js";import"./useZIndex-BbbELKB6.js";import"./motion-DdkSFxyu.js";import"./PurePanel-Bml8ml_A.js";import"./useVariants-CK8wnbnE.js";import"./context-bgT8s9yI.js";import"./asyncToGenerator-CUe5B5qN.js";import"./useLocale-D6ZQsxC3.js";import"./useCSSVarCls-DCHdCyfl.js";import"./Compact-VphdgA5n.js";import"./compact-item-5orumCwJ.js";import"./DownOutlined-C-IxbET4.js";import"./AntdIcon-C0KfWvva.js";import"./CheckOutlined-DcewmLkY.js";import"./CloseCircleFilled-Bgzza4Eo.js";import"./CloseOutlined-CfOpPp0C.js";import"./LoadingOutlined-PTw75qLp.js";import"./SearchOutlined-CS-6PfVh.js";import"./StringToNumberSchema-DICqxOFk.js";import"./index-BQ-NB-n4.js";import"./debounce-DBoK0mBS.js";import"./omitBy-DH6X2eoo.js";var O={exports:{}},V={exports:{}},ie;function or(){return ie||(ie=1,function(e){function r(o){"@babel/helpers - typeof";return e.exports=r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e.exports.__esModule=!0,e.exports.default=e.exports,r(o)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(V)),V.exports}var ue;function Y(){return ue||(ue=1,function(e){var r=or().default;function o(n){if(typeof WeakMap!="function")return null;var a=new WeakMap,i=new WeakMap;return(o=function(l){return l?i:a})(n)}function t(n,a){if(!a&&n&&n.__esModule)return n;if(n===null||r(n)!="object"&&typeof n!="function")return{default:n};var i=o(a);if(i&&i.has(n))return i.get(n);var u={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&{}.hasOwnProperty.call(n,s)){var c=l?Object.getOwnPropertyDescriptor(n,s):null;c&&(c.get||c.set)?Object.defineProperty(u,s,c):u[s]=n[s]}return u.default=n,i&&i.set(n,u),u}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(O)),O.exports}var j={exports:{}},le;function Z(){return le||(le=1,function(e){function r(o){return o&&o.__esModule?o:{default:o}}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(j)),j.exports}var $={exports:{}},P={exports:{}},ce;function ar(){return ce||(ce=1,function(e){function r(o){if(Array.isArray(o))return o}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(P)),P.exports}var D={exports:{}},me;function sr(){return me||(me=1,function(e){function r(o,t){var n=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(n!=null){var a,i,u,l,s=[],c=!0,p=!1;try{if(u=(n=n.call(o)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=u.call(n)).done)&&(s.push(a.value),s.length!==t);c=!0);}catch(f){p=!0,i=f}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(p)throw i}}return s}}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(D)),D.exports}var N={exports:{}},k={exports:{}},pe;function ir(){return pe||(pe=1,function(e){function r(o,t){(t==null||t>o.length)&&(t=o.length);for(var n=0,a=Array(t);n<t;n++)a[n]=o[n];return a}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(k)),k.exports}var de;function ur(){return de||(de=1,function(e){var r=ir();function o(t,n){if(t){if(typeof t=="string")return r(t,n);var a={}.toString.call(t).slice(8,-1);return a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set"?Array.from(t):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(t,n):void 0}}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(N)),N.exports}var H={exports:{}},fe;function lr(){return fe||(fe=1,function(e){function r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(H)),H.exports}var ye;function De(){return ye||(ye=1,function(e){var r=ar(),o=sr(),t=ur(),n=lr();function a(i,u){return r(i)||o(i,u)||t(i,u)||n()}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}($)),$.exports}var I={},ge;function cr(){if(ge)return I;ge=1,Object.defineProperty(I,"__esModule",{value:!0}),I.default=e;function e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}return I}var h={},_={},be;function mr(){if(be)return _;be=1;var e=Y().default;Object.defineProperty(_,"__esModule",{value:!0}),_.default=o;var r=e(X());function o(t){var n=r.useRef();n.current=t;var a=r.useCallback(function(){for(var i,u=arguments.length,l=new Array(u),s=0;s<u;s++)l[s]=arguments[s];return(i=n.current)===null||i===void 0?void 0:i.call.apply(i,[n].concat(l))},[]);return a}return _}var y={},ve;function pr(){if(ve)return y;ve=1;var e=Z().default,r=Y().default;Object.defineProperty(y,"__esModule",{value:!0}),y.useLayoutUpdateEffect=y.default=void 0;var o=r(X()),t=e(cr()),n=(0,t.default)()?o.useLayoutEffect:o.useEffect,a=function(u,l){var s=o.useRef(!0);n(function(){return u(s.current)},l),n(function(){return s.current=!1,function(){s.current=!0}},[])};return y.useLayoutUpdateEffect=function(u,l){a(function(s){if(!s)return u()},l)},y.default=a,y}var S={},xe;function dr(){if(xe)return S;xe=1;var e=Y().default,r=Z().default;Object.defineProperty(S,"__esModule",{value:!0}),S.default=n;var o=r(De()),t=e(X());function n(a){var i=t.useRef(!1),u=t.useState(a),l=(0,o.default)(u,2),s=l[0],c=l[1];t.useEffect(function(){return i.current=!1,function(){i.current=!0}},[]);function p(f,d){d&&i.current||c(f)}return[s,p]}return S}var Ie;function fr(){if(Ie)return h;Ie=1;var e=Z().default;Object.defineProperty(h,"__esModule",{value:!0}),h.default=i;var r=e(De()),o=e(mr()),t=pr(),n=e(dr());function a(u){return u!==void 0}function i(u,l){var s=l||{},c=s.defaultValue,p=s.value,f=s.onChange,d=s.postState,Ne=(0,n.default)(function(){return a(p)?p:a(c)?typeof c=="function"?c():c:typeof u=="function"?u():u}),ee=(0,r.default)(Ne,2),U=ee[0],re=ee[1],v=p!==void 0?p:U,ke=d?d(v):v,He=(0,o.default)(f),ze=(0,n.default)([v]),te=(0,r.default)(ze,2),ne=te[0],Ke=te[1];(0,t.useLayoutUpdateEffect)(function(){var x=ne[0];U!==x&&He(U,x)},[ne]),(0,t.useLayoutUpdateEffect)(function(){a(p)||re(p)},[p]);var Be=(0,o.default)(function(x,oe){re(x,oe),Ke([v],oe)});return[ke,Be]}return h}var yr=fr();const gr=Qe(yr),g=Pe({SegmentSelect:{name:"1txn0i9-emotion-SegmentSelect",styles:"display:flex;flex-direction:column;gap:4px;align-self:stretch;label:emotion-SegmentSelect;"},warningText:L({display:"flex",alignItems:"center",color:G.colors.neutral007,gap:"0.25em"},";label:emotion-warningText;"),warningIcon:{name:"dca7tg-emotion-warningIcon",styles:"font-size:16px;label:emotion-warningIcon;"},totalCount:L({marginTop:"8px",fontSize:"0.875rem",color:G.colors.neutral007},";label:emotion-totalCount;")}),br=()=>W("div",{css:g.warningText,children:[m(je,{"un-i-motif":"circle_cross",css:g.warningIcon}),m(b,{i18nKey:"page.broadcasts.create.segment.reachMemberCountLimit"})]}),vr=()=>W("div",{css:g.warningText,children:[m(je,{"un-i-motif":"circle_cross",css:g.warningIcon}),m(b,{i18nKey:"page.broadcasts.create.emptySegment"})]}),z=Pe({optionLabel:{name:"1vpgarq-emotion-optionLabel",styles:"display:flex;flex-direction:column;font-size:0.875rem;gap:2px;white-space:pre-wrap;label:emotion-optionLabel;"},name:L({fontWeight:500,".ant-select-selection-item &":[Ze,{fontWeight:400}]},";label:emotion-name;"),memberCount:L({display:"flex",":not(.ant-select-item-option-disabled &)":{color:G.colors.neutral007},".ant-select-selection-item &":{display:"none"}},";label:emotion-memberCount;")}),K=(e,r,o)=>W("div",{css:[z.optionLabel,";label:emotion-optionLabelRender;"],title:e,children:[m("span",{css:z.name,children:e}),m("span",{css:z.memberCount,children:m(b,{i18nKey:"page.broadcasts.create.segment.option.memberCount",values:{count:r}})}),r>0?null:m(vr,{}),r<=o?null:m(br,{})]}),B=(e,r)=>e===0||e>r,w="segment-";function E(e){if(e){if(e.userId!==null&&e.teamId===null)return`${w}user-${e.userId}`;if(e.userId!==null&&e.teamId!==null)return`${w}user-in-team-${e.userId}-${e.teamId}`;if(e.userId===null&&e.teamId!==null)return`${w}team-${e.teamId}`;throw new Error("Invalid SegmentValue: userId and teamId cannot both be null")}}const he=new RegExp(`^${Je(w)}(?<selectType>user|team|user-in-team)-(?<id1>\\d+)(?:-(?<id2>\\d+))?$`),xr=rr().regex(he).transform(e=>{const r=e.match(he);if(!r)throw new Error(F`Invalid value: "${e}" does not match the expected format.`);return r.groups}).pipe(tr({selectType:nr(["user","team","user-in-team"]),id1:se.number(),id2:se.number().optional()})).transform(({selectType:e,id1:r,id2:o})=>{switch(e){case"user":return{userId:r,teamId:null};case"team":return{userId:null,teamId:r};case"user-in-team":return{userId:r,teamId:o??null};default:throw new Error(F`Unexpected type: ${e}`)}});function Ir(e){if(!e)return;const r=xr.safeParse(e);if(!r.success)throw new Error(F`Unexpected option value: ${e}`);return r.data}function hr(e,r){const{userId:o,teamId:t}=e;if(o!==null&&t===null)return o===r.myAssignedMembers.id?r.myAssignedMembers.membersCount:0;if(o!==null&&t!==null){if(o===r.myAssignedMembers.id){const n=r.myTeamsAssignedMembers.find(a=>a.id===t);return n?n.membersCount:0}return 0}if(o===null&&t!==null){const n=r.myTeams.find(a=>a.id===t);return n?n.membersCount:0}throw new Error("Invalid SegmentValue: userId and teamId cannot both be null")}const _r=(e,r)=>J.useMemo(()=>e?[{label:m(b,{i18nKey:"page.broadcasts.create.segment.assignToMe"}),options:[{value:E({userId:e.myAssignedMembers.id,teamId:null}),label:K(e.myAssignedMembers.name,e.myAssignedMembers.membersCount,r),disabled:B(e.myAssignedMembers.membersCount,r)},...e.myTeamsAssignedMembers.map(t=>({value:E({userId:e.myAssignedMembers.id,teamId:t.id}),label:K([t.name,e.myAssignedMembers.name].join(Xe),t.membersCount,r),disabled:B(t.membersCount,r)}))]},...e.myTeams.length===0?[]:[$e.dividerOption,{label:m(b,{i18nKey:"page.broadcasts.create.segment.assignToMyTeam"}),options:e.myTeams.map(t=>({value:E({userId:null,teamId:t.id}),label:K(t.name,t.membersCount,r),disabled:B(t.membersCount,r)}))}]]:[],[e,r]),Sr=J.forwardRef(function({dataSource:r,memberLimit:o=Ye,value:t,onChange:n,...a},i){const{t:u}=er(),[l,s]=gr(void 0,{value:E(t),onChange(d){n==null||n(Ir(d))}}),c=Ge(d=>{s(d)}),p=J.useMemo(()=>!t||!r?0:hr(t,r),[t,r]),f=_r(r,o);return W("div",{children:[m($e,{ref:i,css:g.SegmentSelect,placeholder:u("page.broadcasts.create.segment.label"),options:f,value:l,onChange:c,...a}),t?m("div",{css:g.totalCount,children:m(b,{i18nKey:"page.broadcasts.create.segment.memberCount",values:{count:p}})}):null]})}),C=Object.assign(Sr,{styles:g});Fe(C,"SegmentSelect");try{C.displayName="SegmentSelect",C.__docgenInfo={description:`Segment selector component for broadcast targeting.
Allows users to select target audiences grouped by "Assigned to me" and "Assigned to my team".
Automatically fetches member counts using cantata API and generates options dynamically.
Options with zero members or exceeding the member limit are disabled.

Design: [Figma](https://www.figma.com/design/mx37wzAD7RmXI0FPiQfxST/Inbox?node-id=4687-12383&m=dev)`,displayName:"SegmentSelect",props:{}}}catch{}const Q={myAssignedMembers:{id:1,name:"Assigned Members",membersCount:2e4},myTeamsAssignedMembers:[{id:101,name:"Team Alpha",membersCount:5e3},{id:102,name:"Team Beta",membersCount:15e3},{id:103,name:"Team Gamma",membersCount:0}],myTeams:[{id:201,name:"Team Alpha",membersCount:1e4},{id:202,name:"Team Beta",membersCount:25e3},{id:203,name:"Team Gamma",membersCount:99999}]};var Ar={name:"1npoouz-emotion-decorators",styles:"width:450px;label:emotion-decorators;"};const Xt={component:C,args:{dataSource:Q},decorators:[e=>m("div",{css:Ar,children:m(e,{})})]},A={},R={args:{value:{userId:1,teamId:null}}},T={args:{value:{userId:null,teamId:201}}},M={args:{value:{userId:1,teamId:101}}},Rr={...Q,myAssignedMembers:{...Q.myAssignedMembers,name:ae+ae}},q={args:{dataSource:Rr,value:{userId:1,teamId:101}}};var _e,Se,Ae;A.parameters={...A.parameters,docs:{...(_e=A.parameters)==null?void 0:_e.docs,source:{originalSource:"{}",...(Ae=(Se=A.parameters)==null?void 0:Se.docs)==null?void 0:Ae.source}}};var Re,Te,Me;R.parameters={...R.parameters,docs:{...(Re=R.parameters)==null?void 0:Re.docs,source:{originalSource:`{
  args: {
    value: {
      userId: 1,
      teamId: null
    }
  }
}`,...(Me=(Te=R.parameters)==null?void 0:Te.docs)==null?void 0:Me.source}}};var qe,we,Ee;T.parameters={...T.parameters,docs:{...(qe=T.parameters)==null?void 0:qe.docs,source:{originalSource:`{
  args: {
    value: {
      userId: null,
      teamId: 201
    }
  }
}`,...(Ee=(we=T.parameters)==null?void 0:we.docs)==null?void 0:Ee.source}}};var Le,Ce,We;M.parameters={...M.parameters,docs:{...(Le=M.parameters)==null?void 0:Le.docs,source:{originalSource:`{
  args: {
    value: {
      userId: 1,
      teamId: 101
    }
  }
}`,...(We=(Ce=M.parameters)==null?void 0:Ce.docs)==null?void 0:We.source}}};var Ue,Oe,Ve;q.parameters={...q.parameters,docs:{...(Ue=q.parameters)==null?void 0:Ue.docs,source:{originalSource:`{
  args: {
    dataSource: mockAssignedMemberCountWithLongName,
    value: {
      userId: 1,
      teamId: 101
    }
  }
}`,...(Ve=(Oe=q.parameters)==null?void 0:Oe.docs)==null?void 0:Ve.source}}};const Yt=["Default","WithSelectedValue","WithTeamSelectedValue","WithUserTeamSelectedValue","WithLongUserName"];export{A as Default,q as WithLongUserName,R as WithSelectedValue,T as WithTeamSelectedValue,M as WithUserTeamSelectedValue,Yt as __namedExportsOrder,Xt as default};

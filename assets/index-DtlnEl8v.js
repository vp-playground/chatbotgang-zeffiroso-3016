import{j as G,F as fe}from"./emotion-react-jsx-runtime.browser.esm-B6nDGTOp.js";import{u as pe}from"./index-DPz6_WSv.js";import{r}from"./index-qCb0-TeD.js";import{M as ve}from"./index-_xFncG76.js";import{d as Se}from"./index-gEP6Tn1u.js";import{u as H}from"./useEventCallback-HuInTmxh.js";import{i as he}from"./isNil-CHIgUVhi.js";import{c as F}from"./index-DbGQkxQ5.js";import{R as be}from"./index-NCLGaooH.js";import{g as Ae,m as xe,r as Ce,a as ye,p as Ee,b as D}from"./omit-LJmhX_jk.js";import{u as Re,r as $e}from"./useBreakpoint-CVOk84jo.js";import{u as _}from"./useCSSVarCls-DCHdCyfl.js";import{u as ze,t as Oe}from"./useSize-XLj32eBt.js";import"./presets-fZzeZ6Sn.js";import{c as je}from"./reactNode-CVIZC-dj.js";import{P as we}from"./index-CAksj7fM.js";const Y=r.createContext({}),Me=e=>{const{antCls:o,componentCls:t,iconCls:n,avatarBg:s,avatarColor:a,containerSize:i,containerSizeLG:l,containerSizeSM:m,textFontSize:g,textFontSizeLG:u,textFontSizeSM:b,borderRadius:O,borderRadiusLG:A,borderRadiusSM:x,lineWidth:y,lineType:j}=e,$=(c,h,C)=>({width:c,height:c,borderRadius:"50%",[`&${t}-square`]:{borderRadius:C},[`&${t}-icon`]:{fontSize:h,[`> ${n}`]:{margin:0}}});return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},Ce(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:a,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${ye(y)} ${j} transparent`,"&-image":{background:"transparent"},[`${o}-image-img`]:{display:"block"}}),$(i,g,O)),{"&-lg":Object.assign({},$(l,u,A)),"&-sm":Object.assign({},$(m,b,x)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},ke=e=>{const{componentCls:o,groupBorderColor:t,groupOverlapping:n,groupSpace:s}=e;return{[`${o}-group`]:{display:"inline-flex",[o]:{borderColor:t},"> *:not(:first-child)":{marginInlineStart:n}},[`${o}-group-popover`]:{[`${o} + ${o}`]:{marginInlineStart:s}}}},Ie=e=>{const{controlHeight:o,controlHeightLG:t,controlHeightSM:n,fontSize:s,fontSizeLG:a,fontSizeXL:i,fontSizeHeading3:l,marginXS:m,marginXXS:g,colorBorderBg:u}=e;return{containerSize:o,containerSizeLG:t,containerSizeSM:n,textFontSize:Math.round((a+i)/2),textFontSizeLG:l,textFontSizeSM:s,groupSpace:g,groupOverlapping:-m,groupBorderColor:u}},ee=Ae("Avatar",e=>{const{colorTextLightSolid:o,colorTextPlaceholder:t}=e,n=xe(e,{avatarBg:t,avatarColor:o});return[Me(n),ke(n)]},Ie);var Pe=function(e,o){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)o.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(t[n[s]]=e[n[s]]);return t};const te=r.forwardRef((e,o)=>{const{prefixCls:t,shape:n,size:s,src:a,srcSet:i,icon:l,className:m,rootClassName:g,style:u,alt:b,draggable:O,children:A,crossOrigin:x,gap:y=4,onError:j}=e,$=Pe(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","style","alt","draggable","children","crossOrigin","gap","onError"]),[c,h]=r.useState(1),[C,B]=r.useState(!1),[w,P]=r.useState(!0),M=r.useRef(null),z=r.useRef(null),k=Ee(o,M),{getPrefixCls:E,avatar:v}=r.useContext(D),S=r.useContext(Y),I=()=>{if(!z.current||!M.current)return;const p=z.current.offsetWidth,d=M.current.offsetWidth;p!==0&&d!==0&&y*2<d&&h(d-y*2<p?(d-y*2)/p:1)};r.useEffect(()=>{B(!0)},[]),r.useEffect(()=>{P(!0),h(1)},[a]),r.useEffect(I,[y]);const W=()=>{(j==null?void 0:j())!==!1&&P(!1)},f=ze(p=>{var d,q;return(q=(d=s??(S==null?void 0:S.size))!==null&&d!==void 0?d:p)!==null&&q!==void 0?q:"default"}),L=Object.keys(typeof f=="object"?f||{}:{}).some(p=>["xs","sm","md","lg","xl","xxl"].includes(p)),T=Re(L),ce=r.useMemo(()=>{if(typeof f!="object")return{};const p=$e.find(q=>T[q]),d=f[p];return d?{width:d,height:d,fontSize:d&&(l||A)?d/2:18}:{}},[T,f]),R=E("avatar",t),X=_(R),[ae,ie,le]=ee(R,X),ue=F({[`${R}-lg`]:f==="large",[`${R}-sm`]:f==="small"}),K=r.isValidElement(a),de=n||(S==null?void 0:S.shape)||"circle",me=F(R,ue,v==null?void 0:v.className,`${R}-${de}`,{[`${R}-image`]:K||a&&w,[`${R}-icon`]:!!l},le,X,m,g,ie),ge=typeof f=="number"?{width:f,height:f,fontSize:l?f/2:18}:{};let N;if(typeof a=="string"&&w)N=r.createElement("img",{src:a,draggable:O,srcSet:i,onError:W,alt:b,crossOrigin:x});else if(K)N=a;else if(l)N=l;else if(C||c!==1){const p=`scale(${c})`,d={msTransform:p,WebkitTransform:p,transform:p};N=r.createElement(be,{onResize:I},r.createElement("span",{className:`${R}-string`,ref:z,style:Object.assign({},d)},A))}else N=r.createElement("span",{className:`${R}-string`,style:{opacity:0},ref:z},A);return ae(r.createElement("span",Object.assign({},$,{style:Object.assign(Object.assign(Object.assign(Object.assign({},ge),ce),v==null?void 0:v.style),u),className:me,ref:k}),N))}),Z=e=>{const{size:o,shape:t}=r.useContext(Y),n=r.useMemo(()=>({size:e.size||o,shape:e.shape||t}),[e.size,e.shape,o,t]);return r.createElement(Y.Provider,{value:n},e.children)},Be=e=>{var o,t,n,s;const{getPrefixCls:a,direction:i}=r.useContext(D),{prefixCls:l,className:m,rootClassName:g,style:u,maxCount:b,maxStyle:O,size:A,shape:x,maxPopoverPlacement:y,maxPopoverTrigger:j,children:$,max:c}=e,h=a("avatar",l),C=`${h}-group`,B=_(h),[w,P,M]=ee(h,B),z=F(C,{[`${C}-rtl`]:i==="rtl"},M,B,m,g,P),k=Oe($).map((S,I)=>je(S,{key:`avatar-key-${I}`})),E=(c==null?void 0:c.count)||b,v=k.length;if(E&&E<v){const S=k.slice(0,E),I=k.slice(E,v),W=(c==null?void 0:c.style)||O,f=((o=c==null?void 0:c.popover)===null||o===void 0?void 0:o.trigger)||j||"hover",L=((t=c==null?void 0:c.popover)===null||t===void 0?void 0:t.placement)||y||"top",T=Object.assign(Object.assign({content:I},c==null?void 0:c.popover),{classNames:{root:F(`${C}-popover`,(s=(n=c==null?void 0:c.popover)===null||n===void 0?void 0:n.classNames)===null||s===void 0?void 0:s.root)},placement:L,trigger:f});return S.push(r.createElement(we,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},T),r.createElement(te,{style:W},`+${v-E}`))),w(r.createElement(Z,{shape:x,size:A},r.createElement("div",{className:z,style:u},S)))}return w(r.createElement(Z,{shape:x,size:A},r.createElement("div",{className:z,style:u},k)))},oe=te;oe.Group=Be;function Ne(){const e="\\ud800-\\udfff",i="\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff"+"\\u1ab0-\\u1aff"+"\\u1dc0-\\u1dff",l="\\ufe0e\\ufe0f",m="\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c14\\u0c60-\\u0c61",g="\\u0c3e-\\u0c44\\u0c46-\\u0c48\\u0c4a-\\u0c4c\\u0c62-\\u0c63",u="\\u0c15-\\u0c28\\u0c2a-\\u0c39",b="\\u0c58-\\u0c5a",O="\\u0c01-\\u0c03\\u0c4d\\u0c55\\u0c56",x=`[${m}\\u0c66-\\u0c6f\\u0c78-\\u0c7e${b}]|[${u}](?!\\u0c4d)`,y=`[${u}${b}][${g}]|[${u}${b}][${O}]`,$=`(?:${`[${u}]\\u0c4d[${u}]`}|${y}|${x})`,c=`[${e}]`,h=`[${i}]`,C="\\ud83c[\\udffb-\\udfff]",B=`(?:${h}|${C})`,w=`[^${e}]`,P="(?:\\ud83c[\\udde6-\\uddff]){2}",M="[\\ud800-\\udbff][\\udc00-\\udfff]",z="\\u200d",k="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",E=`${B}?`,v=`[${l}]?`,S=`(?:${z}(?:${[w,P,M].join("|")})${v+E})*`,I=v+E+S,W=`${w}${h}?`,f=`(?:${[k,W,h,P,M,c].join("|")})`;return new RegExp(`${C}(?=${C})|${$}|${f+I}`,"g")}const V="‍",ne=(()=>{try{return new RegExp("\\p{L}","u"),!0}catch{return!1}})(),re=e=>e.match(new RegExp(`^(\\p{Emoji})(${V}.)*$`,"u")),Q=[Ne(),new RegExp("[\\S]")],se=[new RegExp("\\p{Lu}|\\p{Ll}|\\p{Lt}|\\p{Lo}","u"),new RegExp("\\p{Lu}|\\p{Ll}|\\p{Lt}|\\p{Lo}|\\p{N}","u"),new RegExp(`(?:(\\p{Emoji})(?:${V}.)*)|\\p{L}|\\p{N}|\\p{S}`,"u"),new RegExp(`(?:(\\p{Emoji})(?:${V}.)*)|\\p{L}|\\p{N}|\\p{S}|\\p{P}`,"u"),new RegExp("[^\\p{Z}|\\p{C}]","u"),...Q],J=e=>{const t=document.createElement("canvas").getContext("2d");if(!t)throw new Error("Failed to get canvas context");const n=16;return t.font=`${n}px sans`,t.measureText(e).width},U=e=>{const o=e.split(V);if(o.length<2)return e;let t=o[0];if(t===void 0)return e;let n=t,s=J(t);for(let a=1;a<o.length;a++){const i=o.slice(0,a+1).join(V),l=J(i);l<=s&&(n=i),t=i,s=l}return n};function Ve(e,o){const t=(o==null?void 0:o.unicode)??ne,n=t?se:Q;for(const s of n){const a=e.match(s);if(a){const i=a[0];if(t&&re(a[0]))return U(i);if(!t){const l=a.filter(g=>!g.match(/^\s$/)),m=l==null?void 0:l[0];return m?U(m):i}return i}}return e[0]??""}const We=Object.assign(Ve,{isRegexUnicodeSupported:ne,isEmoji:re,getFirstVisualEmojiZwjSequence:U,ZWJ:V,legacyRules:Q,unicodeRules:se,measureTextWidth:J}),nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANQSURBVHgB7ZXPS1RRFMe/9/0atcxnP9WIeVZIC0ndRESgEYRCC+kfKBdB0EJbBFGEI0UFgdmqTaAZtMmFq1ooONWiaFEa0cakgWqRpo4/5837cW/nPnUYTWmeBC2aL7y599137pzPOfe884C88vrfxcIYW43dllG8o72sqqY5sqXEpKW466Ra4rHyBDapnAGkc8H0of1HTlpqpBAQcpV+BL/EFPUeQmrgqhn4VnLdwJnSVmhutzRyfnifiofnCwL/nPtJehxHCIks+5wBGJQaQ0ZOGvvBcavfhhAcTKBW+KIDYZRlnzMAKenYqWCykOYBhBACvu/VD14vjdM8JwhpJ+1DA1CkI6mZSdjzs4FjOnsI3wf3/drjV0YbBq+VxuhBndjgOOQ6ZepEYJf9v8hRVnO3KdLqFz1SZO6tPgpVN+B7LnzXge/YiRS364a76mQ9oPH2tOV5sJgCi3MkiTMej5Um1w0MIWQ19bYJsKDidx2oRvHOcsqCRyAemMo6Xt6MxhBSGwJceJCy5uHJSGDbQP/l4rhcjzY9HqKhQc53E0RJWRRMCU4y6TqicqNIN5K2dqGtd/4cU1h72uWW4SCoEiMi0Nw5k+BC6fkw0NcimPqe2M3xsY/QIkXYUrqbIJip6WijHTGE0KoivPvcbTe3qt0FOrMMQjN0Bp1GXWXysqjwYlX1Z84ysJaVPVNfR8E9hx5xYmKtCKkMwI2nqYaIwmPkHBGNruXR0KTzJQg5pzcgdvDY6UzzseemsTA9ERQkdSWz7uK7KEIoAxCt0FsLDAWFdAXO9d8hViqGqrtZgI+s7HVSCwTgBBAluypnEEKZGig0WIMcOb3jXMhIZUCCRgZKbnA/OceXsZUSWn/BloEUVQV3XQjPS7y6s2dzRUipN4P+IpSgxcoj5Stzghif9pH2xJIx5zOEaMmUqFR5muwJ1A+YqoVrydkAClvKsGyzP2d9zNsCLjlcpDfh+5SHtCsym4ipnzG1W1EV6gUVQeopVx1vOw/1IKQyAH1vFjFBjrMdrSsh7n9+/czSDMMyirZRdnh8MTn56NOTUz3YhDIA3ya9P9kmZZTUy7uW73vwF7SqEckvFR1DYq0RpTzh+RgO2+VCSX5AkFdeef0D/QI153svBgGztAAAAABJRU5ErkJggg==",qe=Se({root:{name:"1kbwskh-emotion-root",styles:"@layer emotion-component{&{flex-shrink:0;border:none;}& > img{object-fit:cover;}};label:emotion-root;"}}),Te=r.forwardRef(function({getFirstCharacter:o,icon:t,src:n,...s},a){const i=r.useMemo(()=>o&&typeof t=="string"?We(t,o===!0?{}:o):t,[o,t]),[l,m]=pe(!1),g=H(m.on),u=H(m.off);r.useEffect(()=>{if(!n){g();return}u()},[n,g,u]);const b=H(function(){var x;const A=(x=s.onError)==null?void 0:x.call(s);return g(),A??!0});return G(oe,{css:qe.root,...s,icon:he(i)||i===""?G(ve,{"un-i-motif":"user"}):typeof i=="string"?G(fe,{children:i}):i,...l?{}:{src:n},onError:b,ref:a})}),rt=Object.assign(Te,{});export{rt as A,nt as f,We as g};

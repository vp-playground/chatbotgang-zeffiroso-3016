import{j as a,a as g}from"./emotion-react-jsx-runtime.browser.esm-B6nDGTOp.js";import{u}from"./useHandler-HI23tEoY.js";import{e as h}from"./safeString-CSiFDyUi.js";import{d as q}from"./define-D3i8B5cg.js";import{c as M}from"./emotion-react.browser.esm-DKbCFQzN.js";import{t as T}from"./index-BA0eH0Wu.js";import{r as i}from"./index-qCb0-TeD.js";import{N as G}from"./NotFoundContent-42rRWz8w.js";import{u as J}from"./DisabledContext-t2QVHVjL.js";import{S as K}from"./index-B04UsWsO.js";import{d as Q,c as _}from"./index-gEP6Tn1u.js";import{u as U}from"./useTranslation-XVYQH2mr.js";import{i as X}from"./isArguments-DZsL9lab.js";import{i as Z}from"./isArrayLike-CCcVsAV0.js";import{i as ee}from"./isTypedArray-CzKvdEgb.js";import{i as te}from"./isPrototype-BXSxwdi2.js";import{u as F}from"./useMutation-BNzakrCb.js";import{R as L}from"./LoadingOutlined-PTw75qLp.js";import{b as ne}from"./presets-fZzeZ6Sn.js";import{I as oe}from"./AntdIcon-C0KfWvva.js";function re(e){if(e==null)return!0;if(Z(e))return typeof e.splice!="function"&&typeof e!="string"&&(typeof Buffer>"u"||!Buffer.isBuffer(e))&&!ee(e)&&!X(e)?!1:e.length===0;if(typeof e=="object"){if(e instanceof Map||e instanceof Set)return e.size===0;const n=Object.keys(e);return te(e)?n.filter(c=>c!=="constructor").length===0:n.length===0}return!0}var ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]},name:"tag",theme:"outlined"},ie=function(n,c){return i.createElement(oe,ne({},n,{ref:c,icon:ae}))},B=i.forwardRef(ie);const y=Q({root:{name:"1k2zorm-emotion-root",styles:"display:flex;flex-direction:column;align-items:flex-start;gap:8px;label:emotion-root;"},tagsContainer:{name:"1x2akmw-emotion-tagsContainer",styles:"display:flex;flex-flow:row wrap;gap:8px;label:emotion-tagsContainer;"},warning:M({color:T.colors.red006},";label:emotion-warning;"),createOption:M({display:"flex",alignItems:"center",color:T.colors.neutral009,gap:5,textOverflow:"ellipsis"},";label:emotion-createOption;")});function se(e){return h(e,{trim:!0})}function z(e){return h(e,{trim:!0,deburr:!0}).toLocaleLowerCase()}const ce=(e,n)=>!n||!("name"in n)||typeof name!="string"?!1:z(n.name).includes(z(e)),E=i.forwardRef(function({selectableTags:n=[],unSelectableTags:c=[],maxTagNameLength:d=Number.POSITIVE_INFINITY,onAddTag:R,onCreateTag:j,showSearch:P=!0,...m},A){const{t:l}=U(),[D,V]=i.useState(void 0),[x,w]=i.useState(""),o=i.useMemo(()=>se(x),[x]),S=i.useCallback(function(r){return n.some(s=>s.name===r)},[n]),b=i.useCallback(function(r){return c.some(s=>s.name===r)},[c]),p=i.useMemo(()=>re(o)?"empty":b(o)?"conflict":S(o)?"exist":o.length<=d?"valid":"invalid",[o,d,b,S]),W=u(function(r){return w(h(r,{trim:!0}))}),$=J(),O=F({mutationFn:async(...t)=>await R(...t)}),k=F({mutationFn:async(...t)=>await j(...t)}),C=O.isLoading||k.isLoading,N=C,I=$(m.disabled||N),v=u(function(){w(""),V(void 0)}),H=u(function(r){if(v(),I)return;const s=n.find(f=>f.key===r);if(s){O.mutate(s);return}p==="valid"&&k.mutate(o)}),Y=u(function(...r){var f;const[s]=r;(f=m.onBlur)==null||f.call(m,...r),!s.isDefaultPrevented()&&v()});return a(K,{notFoundContent:a(G,{message:l("common.noResults")}),placeholder:l("common.tagSelectPlaceholder"),showSearch:P,...m,value:D,onSearch:W,onBlur:Y,optionFilterProp:"name",filterOption:ce,options:[...n.map(t=>({key:t.key,value:t.key,label:t.children,name:t.name})),...p==="valid"?[{key:"create",value:o,label:g("span",{css:y.createOption,children:[C?a(L,{}):a(B,{}),a("div",{css:_,children:l("tag.createWithNewOne",{name:o})})]}),name:o}]:p==="invalid"?[q({key:"create",value:o,label:g("div",{style:{display:"flex",flexDirection:"column",width:"100%",gap:"4px"},children:[g("span",{css:y.createOption,children:[a(B,{}),a("div",{css:_,children:l("tag.createWithNewOne",{name:o})})]}),a("div",{css:y.warning,children:l("validation.text.maxLength",{count:d})})]}),name:o,disabled:!0})]:[]],onChange:H,disabled:I,...N?{suffixIcon:a(L,{})}:{},ref:A})});try{E.displayName="TagSelector",E.__docgenInfo={description:"A component that allows users to select tags.",displayName:"TagSelector",props:{}}}catch{}export{E as T};

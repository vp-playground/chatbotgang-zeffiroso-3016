var a={env:{}};const A=/^[A-Za-z]:\//;function l(e=""){return e&&e.replace(/\\/g,"/").replace(A,t=>t.toUpperCase())}const x=/^[/\\]{2}/,S=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,m=/^[A-Za-z]:$/,_=/^\/([A-Za-z]:)?$/,T="/",b=":",h=function(e){if(e.length===0)return".";e=l(e);const t=e.match(x),n=c(e),o=e[e.length-1]==="/";return e=g(e,!n),e.length===0?n?"/":o?"./":".":(o&&(e+="/"),m.test(e)&&(e+="/"),t?n?`//${e}`:`//./${e}`:n&&!c(e)?`/${e}`:e)},v=function(...e){if(e.length===0)return".";let t;for(const n of e)n&&n.length>0&&(t===void 0?t=n:t+=`/${n}`);return t===void 0?".":h(t.replace(/\/\/+/g,"/"))};function z(){return typeof a<"u"&&typeof a.cwd=="function"?a.cwd().replace(/\\/g,"/"):"/"}const u=function(...e){e=e.map(o=>l(o));let t="",n=!1;for(let o=e.length-1;o>=-1&&!n;o--){const s=o>=0?e[o]:z();!s||s.length===0||(t=`${s}/${t}`,n=c(s))}return t=g(t,!n),n&&!c(t)?`/${t}`:t.length>0?t:"."};function g(e,t){let n="",o=0,s=-1,i=0,f=null;for(let r=0;r<=e.length;++r){if(r<e.length)f=e[r];else{if(f==="/")break;f="/"}if(f==="/"){if(!(s===r-1||i===1))if(i===2){if(n.length<2||o!==2||n[n.length-1]!=="."||n[n.length-2]!=="."){if(n.length>2){const d=n.lastIndexOf("/");d===-1?(n="",o=0):(n=n.slice(0,d),o=n.length-1-n.lastIndexOf("/")),s=r,i=0;continue}else if(n.length>0){n="",o=0,s=r,i=0;continue}}t&&(n+=n.length>0?"/..":"..",o=2)}else n.length>0?n+=`/${e.slice(s+1,r)}`:n=e.slice(s+1,r),o=r-s-1;s=r,i=0}else f==="."&&i!==-1?++i:i=-1}return n}const c=function(e){return S.test(e)},j=function(e){return l(e)},I=/.(\.[^./]+)$/,E=function(e){const t=I.exec(l(e));return t&&t[1]||""},O=function(e,t){const n=u(e).replace(_,"$1").split("/"),o=u(t).replace(_,"$1").split("/");if(o[0][1]===":"&&n[0][1]===":"&&n[0]!==o[0])return o.join("/");const s=[...n];for(const i of s){if(o[0]!==i)break;n.shift(),o.shift()}return[...n.map(()=>".."),...o].join("/")},$=function(e){const t=l(e).replace(/\/$/,"").split("/").slice(0,-1);return t.length===1&&m.test(t[0])&&(t[0]+="/"),t.join("/")||(c(e)?"/":".")},L=function(e){const t=[e.root,e.dir,e.base??e.name+e.ext].filter(Boolean);return l(e.root?u(...t):t.join("/"))},R=function(e,t){const n=l(e).split("/").pop();return t&&n.endsWith(t)?n.slice(0,-t.length):n},P=function(e){const t=l(e).split("/").shift()||"/",n=R(e),o=E(n);return{root:t,dir:$(e),base:n,ext:o,name:n.slice(0,n.length-o.length)}},w={__proto__:null,basename:R,delimiter:b,dirname:$,extname:E,format:L,isAbsolute:c,join:v,normalize:h,normalizeString:g,parse:P,relative:O,resolve:u,sep:T,toNamespacedPath:j};export{E as e,w as p};
